<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="utf-8" />
  <title>SPT-TinyConfig</title>
  <!-- Simple CSS (unminified) -->
  <!-- <link rel="stylesheet" href="https://cdn.simplecss.org/simple.css"> -->
  <link rel="stylesheet" href="/style/index.css">
</head>

<body>
  <header>

    <div class="container row">
      <!-- <div class="logo">
        
      </div> -->
      <div class="brand">
        <img src="data/app/images/icon.ico" height="48px" width="48px"
          alt="spt" />
        <h4>Single Player Tarkov</h4>
      </div>

      <div class="title">
        <h4>SPTarkov easy profile editor</h4>
      </div>

      <div class="buttons">
        <div class="history">
          <details>
            <summary>History</summary>
            <p>C:\user\johnS\documents\example.json</p>
          </details>
        </div>
        <button class="btn secondary" id="saveBtn"
          title="Save local file"><span>Save</span></button>
        <button class="btn secondary" id="loadBtn" title="Open data file"
          onclick="openTest()"><span>Load</span></button>
        <input type="file" id="openFile" accept="application/json" hidden>
      </div>
    </div>
  </header>

  <main>

    <aside class="card panel stack">

      <div class="stack">
        <h1>Links for navigation</h1>
        <ul>
          <li>Global Settings</li>
          <li>User Profile</li>
          <li>Bot Settings</li>
          <li>Loot (Map) Settings</li>
          <li>Trader Settings</li>
        </ul>
        <label for="testArea">Test area (Javascript only - optional)</label>
        <textarea id="testArea" class="text"
          placeholder="Write simple test to application"></textarea>
      </div>

      <div class="muted">
        Tip: <span class="kbd">Ctrl</span> + <span class="kbd">S</span> to save,
        <span class="kbd">Ctrl</span> + <span class="kbd">Enter</span> to run.
      </div>

      <div class="treeBrowser">
        <pre><code>-> Globals
  -> Health
    -> Head HP</code></pre>
      </div>
    </aside>

    <section class="content">
      <h1>Main Section</h1>
      <p>This is a website. It's really cool. <a
          href="https://simplecss.org">visit
          their site</a>.</p>
      <details>
        <summary>Interesting Object</summary>
        <p>Info about the object</p>
        <code>body {
            color: var(--text);
            background: var(--bg);
            font-size: 1.15rem;
            line-height: 1.5;
            margin: 0;
          }</code>
      </details>
      <!-- <div class="objectEditor">No object selected, open json file.</div> -->
      <!-- <div class="list"></div> -->
    </section>
  </main>

  <footer>
    <p>Created by: ohs-dev<br>
      Source: <a
        href="https://github.com/ohs-dev/spt-config.git">https://github.com/ohs-dev/spt-config.git</a>
    </p>
  </footer>
</body>
<script>
  /* const t_map = new Map();
  const section = document.querySelector('section');


  fetch('data/app/traders.json')
    .then(res => res.json())
    .then(resJson => {

      // Build collection of objects in a trader Map and display page
      Object.keys(resJson).forEach(key => {
        if (resJson.hasOwnProperty(key)) {

          // add to trader array
          t_map.set(key, resJson[key]);

          // display as html element (p)
          section.insertAdjacentHTML('beforeend', `${key}`);
          section.insertAdjacentHTML('beforeend', `<pre>${JSON.stringify(resJson[key], null, 2)}</pre>`);

          // loop through object sub-properties
          //Object.keys(sub_k).forEach(prop => {
          //  if (sub_k.hasOwnProperty(prop)) {
          //    section.insertAdjacentHTML('beforeend', `< p > ${ prop } : ${ sub_k[prop]}</p >`);
          //  }
          //});

        }
      });
      console.log(t_map.entries());
    }); */

  function openTest() {
    const fName = "data/app/bot_details.json";
    const t_map = new Map();

    const section = document.querySelector('section');
    const sec_details = document.querySelector('section').querySelector('details');
    const sec_last = section.lastElementChild;

    sec_last.innerHTML = "<summary>test</summary>";


    //const lastEl = section.lastElementChild;

    //console.log(sec_details);
    //console.log(lastEl);

    console.log(sec_details.firstElementChild.innerHTML);
    console.log(sec_details.firstElementChild.outerHTML);

    fetch(fName)
      .then(res => res.json())
      .then(resJson => {

        // Build collection of objects in a trader Map and display page
        Object.keys(resJson).forEach(key => {
          if (resJson.hasOwnProperty(key)) {

            // add to trader array
            t_map.set(key, resJson[key]);

            // display as html element
            sec_details.insertAdjacentHTML('beforeend', `${key}`);
            sec_details.insertAdjacentHTML('beforeend', `<pre>${JSON.stringify(resJson[key], null, 2)}</pre>`);

          }
        });
        /* console.log(t_map.entries()); */
      });
  }

  function mapProps(obj) {
    Object.keys(obj).forEach(key => {
      if (obj.hasOwnProperty(key)) {

      }
    });
  }
</script>

</html>