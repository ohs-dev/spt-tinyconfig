<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="utf-8" />
  <title>SPT-TinyConfig</title>
  <link rel="stylesheet" href="./src/style/index.css">
  <!-- <link rel="stylesheet" href="/style/index.css"> -->
</head>

<body>
  <div class="page">

    <header>

      <div class="container">

        <div class="logo">
          <img src="./src/assets/images/tarkov/spt-logo-alt.png" alt="SPT-Logo"
            title="SPT Logo"></img>
        </div>

        <div class="nav">
          <button class="menubtn" id="nav_globals">
            <i class="arrow down"></i>
            Global Settings
          </button>

          <button class="menubtn" id="nav_ai">
            <i class="arrow down"></i>
            Enemy Bot AI
          </button>
          <button class="menubtn" id="nav_traders">
            <i class="arrow down"></i>
            Traders
          </button>
          <button class="menubtn" id="nav_maps">
            <i class="arrow down"></i>
            Maps
          </button>
          <button class="menubtn" id="nav_equipment">
            <i class="arrow down"></i>
            Equipment
          </button>
          <button class="menubtn" id="nav_loot">
            <i class="arrow down"></i>
            Loot
          </button>
          <button class="menubtn" id="nav_quests">
            <i class="arrow down"></i>
            Quests
          </button>
          <button class="menubtn" id="nav_profile">
            <i class="arrow down"></i>
            User Profile
          </button>
        </div>

        <div class="nav_end">
          <!-- <button class="btn secondary" id="saveBtn" title="Save file"
              onclick="saveFile()"><span>Save</span></button>
            <button class="btn secondary" id="loadBtn" title="Open data"
              onclick="openFile()"><span>Load</span></button> -->
          <svg width="64px" height="64px" viewBox="-2.4 -2.4 28.80 28.80"
            fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#dcdcdc">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round"
              stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
              <g clip-path="url(#cfcfcfclip0_429_11066)">
                <path d="M3 6.00092H21M3 12.0009H21M3 18.0009H21"
                  stroke="#cfcfcf" stroke-width="2.5" stroke-linecap="round"
                  stroke-linejoin="round"></path>
              </g>
              <defs>
                <clipPath id="clip0_429_11066">
                  <rect width="24" height="24" fill="white"
                    transform="translate(0 0.000915527)"></rect>
                </clipPath>
              </defs>
            </g>
          </svg>
        </div>

      </div>

    </header>

    <main>

      <aside>
        <div class="stack">
          <!-- <h1>Links for navigation</h1> -->
          <div class="sideNav">
            <button id="global" class="sideLink">
              <!-- data\SPT_Data\Server\images\handbook\EfT_UI_Icons_BigTrophy.png -->
              <!-- data\SPT_Data\Server\images\handbook\icon_info.png -->
              <img
                src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook\icon_info.png"
                width="32px" height="32px">
              <span>Global Settings</span>
            </button>
            <button id="user" class="sideLink">
              <!-- images/handbook/EfT_UI_Icons_DogTag.png -->
              <!-- images\prestige\675864eb86778bc82004127c.png -->
              <img
                src="./src/assets/spt/3.11.3/SPT_Data/Server/images\prestige\675864eb86778bc82004127c.png"
                width="32px" height="32px"> <span>User Profile</span>
            </button>
            <button id="bots" class="sideLink">
              <!-- data/SPT_Data/Server/images/quest/icon/5d69468a86f77452aa51d79d.png -->
              <!-- data/SPT_Data/Server/images/handbook/icon_ammo.png -->
              <img
                src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook/icon_ammo.png"
                width="32px" height="32px"> <span>Bots</span>
            </button>
            <button id="maps" class="sideLink">
              <img
                src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook/icon_maps.png"
                alt="" width="32px" height="32px"> <span>Maps</span>
              <!-- <img src="data/SPT_Data/Server/images/banners/norvinskzone.png"
              width="32px" height="32px">Maps -->
            </button>
            <button id="loot" class="sideLink">
              <!-- images/hideout/icon_hideout_videocardslots.png -->
              <!-- data/SPT_Data/Server/images/handbook/icon_money.png -->
              <img
                src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook/icon_money.png"
                width="32px" height="32px"> <span>Loot</span>
            </button>
            <button id="traders" class="sideLink">
              <img
                src="./src/assets/spt/3.11.3/SPT_Data/Server/images/trader/avatar/5a7c2ebb86f7746e324a06ab.png"
                width="32px" height="32px"> <span>Traders</span>
            </button>
            <button id="quests" class="sideLink">
              <!-- images/quest/icon/59c26dd986f77427033c3e83.png -->
              <!-- images/handbook/icon_quest.png -->
              <!-- data/SPT_Data/Server/images/handbook/icon_spec.png -->
              <img
                src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook/icon_spec.png"
                alt="" width="32px" height="32px"> <span>Quests</span>
            </button>
            <button id="hideout" class="sideLink">
              <!-- data/SPT_Data/Server/images/handbook/icon_barter_energy.png -->
              <img
                src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook/icon_barter_energy.png"
                alt="" width="32px" height="32px"> <span>Hideout</span>
            </button>
          </div>

          <label for="search"> Search area: (optional)
          </label>

          <textarea id="search" class="text"
            placeholder="Find a value or property within the loaded document."></textarea>

          <div class="tip muted">
            Tip: <span class="kbd">Ctrl</span> + <span class="kbd">S</span> to
            save,
            <span class="kbd">Ctrl</span> + <span class="kbd">Enter</span> to
            run.
          </div>
        </div>
      </aside>

      <section class="content">
        <!-- Divides main page content into 2 columns. L(image), R(text block) -->
        <div class="two_columns">
          <p><img class="eye_candy"
              src="./src/assets/images/tarkov/eft-art.avif" alt=""></p>
          <div class="info_block">
            <h1>Get Started!</h1>
            <!-- <p>Click the <span class="kbd">Load</span> button to get started
            making changes to your <span class="spt"><a
                href="https://sp-tarkov.com/"><img
                  src="./src/assets/images/spt-logo-grey.png"
                  alt="Single Player Tarkov"></a></span> save
            files. If you have multiple SPT versions installed, please select
            the version with the profile you wish to configure.</p>
            <p>For more information about SPTarkov check out the installation
            guide <a href="https://sp-tarkov.com/">here</a>.</p> -->
            <ul class="no-deco">
              <li>Click the <span class="kbd">Load</span> button to get
                started
                making changes to your <span class="spt"><a
                    href="https://sp-tarkov.com/"><img
                      src="./src/assets/images/tarkov/icon.ico"
                      alt="Single Player Tarkov"></a></span> save
                files. </li>
              <li>If you have multiple SPT versions installed, please select
                the version with the profile you wish to configure.</li>
              <li>For more information about SPTarkov check out the
                installation
                guide <a href="https://sp-tarkov.com/">here</a>.</li>
            </ul>
          </div>
        </div>

        <div class="test">
          <details>
            <summary>Interesting Object</summary>
            <code>body {
              color: var(--text);
              background: var(--bg);
              font-size: 1.15rem;
              line-height: 1.5;
              margin: 0;
            }</code>
          </details>
        </div>

      </section>

    </main>

    <footer>
      <p>Created by: ohs-dev<br>
        Source: <a
          href="https://github.com/ohs-dev/spt-config.git">https://github.com/ohs-dev/spt-config.git</a>
      </p>
    </footer>

  </div>
</body>
<script>

  /* const toggler = document.getElementsByClassName("caret");

  for (let i = 0; i < toggler.length; i++) {
    toggler[i].addEventListener("click", function () {
      this.parentElement.querySelector(".nested").classList.toggle("active");
      this.classList.toggle("caret-down");
    });
  } */


  const hdr = document.querySelector('header');
  console.log('header width: ', hdr.clientWidth);
  console.log('header height: ', hdr.clientHeight);

  const ctr = document.querySelector('div.container');
  console.log('container-w: ', ctr.clientWidth);
  console.log('container-h: ', ctr.clientHeight);

  const nv = document.querySelector('div.nav');
  console.log('nav_menu width: ', nv.clientWidth);
  console.log('nav_menu height: ', nv.clientHeight);





  function saveFile() {
    console.log("Save button pressed.");

    /* GraphQL query
    {
      bosses {
        name
        id
        imagePortraitLink
      }
    }
    */
    try {
      const cardPanel = document.querySelector('div.card_panel');

      fetch('https://api.tarkov.dev/graphql', {
        method: 'POST',
        headers: {
          'Accept': 'application/json',
        },
        body: JSON.stringify({
          query: `{bosses {id name imagePortraitLink}}`
        })
      })
        .then(r => r.json())
        .then(data => {
          console.log('data returned:', data);

          const bossObj = data['data']['bosses'];
          //console.log('bossObj: ', JSON.stringify(bossObj));

          if (bossObj) {

            // Loop through bosses returned from the api
            for (let i = 0; i < bossObj.length - 1; i++) {

              if (bossObj[i].name) {

                console.log(bossObj[i].name);
                // create new <div> element
                const newCard = document.createElement('div');
                // set class on new card
                newCard.classList.add('card');
                // create h2 and img for the card.
                const newh2 = document.createElement('h2');
                newh2.innerText = bossObj[i].name;
                const newimg = document.createElement('img');
                newimg.src = bossObj[i].imagePortraitLink;

                // add h2 & img to card
                newCard.append(newh2);
                newCard.append(newimg);

                // insert into card panel
                cardPanel.append(newCard);
              }
            }
          }
        });

    } catch (err) {
      console.log('SaveFileError: \n', err.message);
    }

  }

  function openFile() {
    const fName = "./test/bear.json";
    const t_map = new Map();

    const section = document.querySelector('section');
    const section_div = document.querySelector('section div.test');

    fetch(fName)
      .then(res => res.json())
      .then(resJson => {

        const test = section_div.querySelector('details');
        section_div.removeChild(test);

        // Build collection of objects in a Map and display as page elements
        Object.keys(resJson).forEach(key => {
          if (resJson.hasOwnProperty(key)) {

            // add to object array
            t_map.set(key, resJson[key]);

            const dtl = document.createElement("details");
            dtl.id = key;
            dtl.innerHTML = `<summary>${key}</summary><pre>${JSON.stringify(resJson[key], null, 2)}</pre>`;

            section_div.append(dtl);
          }
        });
        /* console.log(t_map.entries()); */
      });
  }

</script>

</html>