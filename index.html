<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="utf-8" />
  <title>SPT-TinyConfig</title>
  <link rel="stylesheet" href="./src/style/index.css">
  <!-- <link rel="stylesheet" href="/style/index.css"> -->
</head>

<body>
  <header>
    <div class="container">

      <div class="brand">
        <img src="./src/assets/images/tarkov/spt-logo-grey.png" height="auto"
          width="auto" alt="SPT-Logo" title="SPT Logo" />
        <!-- <img src="./src/assets/images/tarkov/icon.ico" height="48px"
          width="48px" alt="spt" /> -->
        <h4>Single Player Tarkov</h4>
      </div>

      <div class="title">
        <h4>SPTarkov easy profile editor</h4>
      </div>

      <div class="buttons">
        <div class="history">
          <details>
            <summary>History</summary>
            <p>C:/user/johnS\documents\example.json</p>
          </details>
        </div>
        <button class="btn secondary" id="saveBtn" title="Save local file"
          onclick="saveFile()"><span>Save</span></button>
        <button class="btn secondary" id="loadBtn" title="Open data file"
          onclick="openFile()"><span>Load</span></button>
        <input type="file" id="openFile" accept="application/json" hidden>
      </div>
    </div>
  </header>

  <main>

    <aside>
      <div class="stack">
        <h1>Links for navigation</h1>
        <div class="sideNav">
          <button id="global" class="sideLink">
            <!-- data\SPT_Data\Server\images\handbook\EfT_UI_Icons_BigTrophy.png -->
            <!-- data\SPT_Data\Server\images\handbook\icon_info.png -->
            <img
              src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook\icon_info.png"
              width="32px" height="32px">
            <span>Global Settings</span>
          </button>
          <button id="user" class="sideLink">
            <!-- images/handbook/EfT_UI_Icons_DogTag.png -->
            <!-- images\prestige\675864eb86778bc82004127c.png -->
            <img
              src="./src/assets/spt/3.11.3/SPT_Data/Server/images\prestige\675864eb86778bc82004127c.png"
              width="32px" height="32px"> <span>User Profile</span>
          </button>
          <button id="bots" class="sideLink">
            <!-- data/SPT_Data/Server/images/quest/icon/5d69468a86f77452aa51d79d.png -->
            <!-- data/SPT_Data/Server/images/handbook/icon_ammo.png -->
            <img
              src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook/icon_ammo.png"
              width="32px" height="32px"> <span>Bots</span>
          </button>
          <button id="maps" class="sideLink">
            <img
              src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook/icon_maps.png"
              alt="" width="32px" height="32px"> <span>Maps</span>
            <!-- <img src="data/SPT_Data/Server/images/banners/norvinskzone.png"
              width="32px" height="32px">Maps -->
          </button>
          <button id="loot" class="sideLink">
            <!-- images/hideout/icon_hideout_videocardslots.png -->
            <!-- data/SPT_Data/Server/images/handbook/icon_money.png -->
            <img
              src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook/icon_money.png"
              width="32px" height="32px"> <span>Loot</span>
          </button>
          <button id="traders" class="sideLink">
            <img
              src="./src/assets/spt/3.11.3/SPT_Data/Server/images/trader/avatar/5a7c2ebb86f7746e324a06ab.png"
              width="32px" height="32px"> <span>Traders</span>
          </button>
          <button id="quests" class="sideLink">
            <!-- images/quest/icon/59c26dd986f77427033c3e83.png -->
            <!-- images/handbook/icon_quest.png -->
            <!-- data/SPT_Data/Server/images/handbook/icon_spec.png -->
            <img
              src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook/icon_spec.png"
              alt="" width="32px" height="32px"> <span>Quests</span>
          </button>
          <button id="hideout" class="sideLink">
            <!-- data/SPT_Data/Server/images/handbook/icon_barter_energy.png -->
            <img
              src="./src/assets/spt/3.11.3/SPT_Data/Server/images/handbook/icon_barter_energy.png"
              alt="" width="32px" height="32px"> <span>Hideout</span>
          </button>
        </div>

        <label for="testArea"> Search area: (optional)
        </label>

        <textarea id="testArea" class="text"
          placeholder="Find a value or property within the loaded document."></textarea>

        <div class="muted">
          Tip: <span class="kbd">Ctrl</span> + <span class="kbd">S</span> to
          save,
          <span class="kbd">Ctrl</span> + <span class="kbd">Enter</span> to run.
        </div>
      </div>

      <div class="treeBrowser">
        <pre><code>-> Globals
  -> Health
    -> Head HP</code></pre>
      </div>
    </aside>

    <section class="content">
      <div class="two_columns">
        <p><img class="eye_candy" src="./src/assets/images/tarkov/eft-art.avif"
            alt=""></p>
        <div class="info_block">
          <h1>Get Started!</h1>
          <!-- <p>Click the <span class="kbd">Load</span> button to get started
            making changes to your <span class="spt"><a
                href="https://sp-tarkov.com/"><img
                  src="./src/assets/images/spt-logo-grey.png"
                  alt="Single Player Tarkov"></a></span> save
            files. If you have multiple SPT versions installed, please select
            the version with the profile you wish to configure.</p>
            <p>For more information about SPTarkov check out the installation
            guide <a href="https://sp-tarkov.com/">here</a>.</p> -->
          <ul class="no-deco">
            <li>Click the <span class="kbd">Load</span> button to get started
              making changes to your <span class="spt"><a
                  href="https://sp-tarkov.com/"><img
                    src="./src/assets/images/tarkov/icon.ico"
                    alt="Single Player Tarkov"></a></span> save
              files. </li>
            <li>If you have multiple SPT versions installed, please select
              the version with the profile you wish to configure.</li>
            <li>For more information about SPTarkov check out the installation
              guide <a href="https://sp-tarkov.com/">here</a>.</li>
          </ul>
        </div>
      </div>

      <div class="treeView">

        <ul class="tree">
          <li>
            <details open>
              <summary> Bosses
                <!-- <img src="./src/assets/images/tarkov/spt-logo-grey.png"> -->
              </summary>
              <ul>
                <li>
                  <details>
                    <summary>Killa</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Sanitar</summary>
                    <ul>
                      <li>Health</li>
                      <li>Meds</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Reshala</summary>
                    <ul>
                      <li>Inventory</li>
                      <li>Equipment</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Glukhar</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Knight</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Big Pipe</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Birdeye</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Cultist Priest</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Glukhar</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Kaban</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Kollontay</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Partisan</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Shturman</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Tagilla</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>
                <li>
                  <details>
                    <summary>Zryachiy</summary>
                    <ul>
                      <li>Health</li>
                      <li>Difficulty</li>
                    </ul>
                  </details>
                </li>

              </ul>
            </details>
          </li>
          <li>
            <details>
              <summary>Regular Scavs</summary>
              <ul>
                <li>Scav</li>
                <li>Marksman</li>
              </ul>
            </details>
          </li>
          <li>
            <details>
              <summary>Players</summary>
              <ul>
                <li>Usec</li>
                <li>Bear</li>
                <li>Player Scavs</li>
              </ul>
            </details>
          </li>
        </ul>
        <!-- <img src="src/assets/images/treeview_check.svg">
        <img src="src/assets/images/checkmark_dark.svg">
        <img src="src/assets/images/treeview_plus.svg">
        <img src="src/assets/images/checkmark.svg">
        <img src="src/assets/images/expand-collapse.svg"> -->
      </div>

      <div class="card_panel">
        <div class="card">
          <h2>Killa</h2>
          <img src="./src/assets/images/tarkov/figurines/killa_fig.webp" alt="">
        </div>
        <div class="card">
          <h2>Reshala</h2>
          <img src="./src/assets/images/tarkov/figurines/reshala_fig.webp"
            alt="">
        </div>
        <div class="card">
          <h2>USEC</h2>
          <img src="./src/assets/images/tarkov/figurines/usec_fig.webp" alt="">
        </div>
        <div class="card">
          <h2>Scav</h2>
          <img src="./src/assets/images/tarkov/figurines/scav_fig.webp" alt="">
        </div>
        <div class="card">
          <h2>Tagilla</h2>
          <img src="./src/assets/images/tarkov/figurines/tagilla_fig.webp"
            alt="">
        </div>
        <div class="card">
          <h2>Cultist</h2>
          <img src="./src/assets/images/tarkov/figurines/cultist_fig.webp"
            alt="">
        </div>
        <div class="card">
          <h2>Vengeful Killa</h2><img
            src="https://assets.tarkov.dev/vengeful-killa-portrait.webp">
        </div>
      </div>

      <div class="test">
        <details>
          <summary>Interesting Object</summary>
          <code>body {
              color: var(--text);
              background: var(--bg);
              font-size: 1.15rem;
              line-height: 1.5;
              margin: 0;
            }</code>
        </details>
      </div>
    </section>

  </main>

  <footer>
    <p>Created by: ohs-dev<br>
      Source: <a
        href="https://github.com/ohs-dev/spt-config.git">https://github.com/ohs-dev/spt-config.git</a>
    </p>
  </footer>
</body>
<script>

  /* const toggler = document.getElementsByClassName("caret");

  for (let i = 0; i < toggler.length; i++) {
    toggler[i].addEventListener("click", function () {
      this.parentElement.querySelector(".nested").classList.toggle("active");
      this.classList.toggle("caret-down");
    });
  } */

  /* Testing querySelector by class and removing hidden attribute
  
  function classTest() {
    const test_div = document.querySelector('.content .test');
    test_div.removeAttribute('hidden');
  }; 
  */




  function saveFile() {
    console.log("Save button pressed.");

    /* fetch('https://api.tarkov.dev/graphql')
      .then(res => res.json())
      .then(
        resJson => {
          console.log(resJson);
        }
      ); */

    /* GraphQL query
    {
      bosses {
        name
        id
        imagePortraitLink
      }
    }
    */

    fetch('https://api.tarkov.dev/graphql', {
      method: 'POST',
      headers: {
        'Accept': 'application/json',
      },
      body: JSON.stringify({
        query: `{bosses {id name imagePortraitLink}}`
      })
    })
      .then(r => r.json())
      .then(data => {
        console.log('data returned:');

        const t = document.querySelector('div.test>details>code');
        t.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;

        const cardPanel = document.querySelector('div.card_panel');

        const bossObj = data['data']['bosses'];
        //console.log(bossinfo);

        /* const s = JSON.stringify(data);
        console.log(s);
        const bossObj = JSON.parse(s); */

        if (bossObj != undefined) {

          for (let i = 0; i < bossObj.length - 1; i++) {

            const newCard = document.createElement('div.card');

            if (bossObj[i].name != undefined) {
              newCard.innerHTML = `<h2>${bossObj[i].name}</h2><img src="${bossObj[i].imagePortraitLink}">`;
            } else {
              console.log(bossObj);
              newCard.innerHTML = `<h2>${bossObj[i]}</h2>`;
            }

            cardPanel.append(newCard);
          }
        }




        /* for (let b of bossinfo) {
          const newCard = document.createElement('div.card');
          newCard.innerText = `<h2>${name}</h2>`;
          cardPanel.append(newCard);
        } */

        /* data['bosses'].forEach(name => {
          const newCard = document.createElement('div.card');
          newCard.innerText = `<h2>${name}</h2>`;
          cardPanel.append(newCard);
        }); */

      });



  }

  function openFile() {
    const fName = "../test/bear.json";
    const t_map = new Map();

    const section = document.querySelector('section');
    //const section_div = section.querySelector('div.test');
    const section_div = document.querySelector('section div.test');

    fetch(fName)
      .then(res => res.json())
      .then(resJson => {

        const test = section_div.querySelector('details');
        section_div.removeChild(test);

        // Build collection of objects in a Map and display as page elements
        Object.keys(resJson).forEach(key => {
          if (resJson.hasOwnProperty(key)) {

            // add to object array
            t_map.set(key, resJson[key]);

            const dtl = document.createElement("details");
            dtl.id = key;
            dtl.innerHTML = `<summary>${key}</summary><pre>${JSON.stringify(resJson[key], null, 2)}</pre>`;

            section_div.append(dtl);
          }
        });
        /* console.log(t_map.entries()); */
      });
  }

  function mapProps(obj) {
    Object.keys(obj).forEach(key => {
      if (obj.hasOwnProperty(key)) {

      }
    });
  }
</script>

</html>